# Структура модуля

[Основной стандарт](https://its.1c.ru/db/v8std#content:455:hdoc)

## Отклонения в структуре при изменении конфигураций на поддержке

Поскольку при изменении конфигураций на поддержке рекомендуется придерживаться правила минимизации изменений с целью упрощения процесса обновления рекомендуется соблюдать следующие правила.
* Типовой код должен располагаться в том порядке, в котором он создан вендором. Изменение порядка следования методов не рекомендуется
* Области, созданные вендором, должны располагаться в том порядке, в котором они были находятся в конфигурации на поддержке
* Даже при наличии областей от вендора подходящих под требования стандартов ПТБ, не допускается вносить в них никакие изменения
* Собственные области добавляются в конце модуля, после всех областей и методов вендора
* При этом рекомендуется придерживаться порядка расположения областей согласно стандартам
* Допускается имя всех областей дополнять суффиксом "_<Имя>" (сокращение, аббревиатура для данной конфигурации)
* Отклонения допустимы для области "ОписаниеПеременных", она должна располагаться до описания переменных вендора

## Рекомендуемые структуры

Порядок расположения процедур и функций согласно директивам компиляции см. в стандарте [Использование директив компиляции](./std439.MD).

### Модуль формы

Описание областей:
* **Программный интерфейс**. Экспортные процедуры и функции, предназначенные для использования другими объектами конфигурации или другими программами (например, через внешнее соединение)
* **Управление формой**. Процедуры и функции, предназначенные для инициализации формы, настройки внешнего вида формы, управления видимостью, доступностью и др. атрибутами формы
* **Обработчики событий элементов шапки формы**. Процедуры-обработчики элементов, расположенных в основной части формы (все, что не связано с таблицами на форме)
* **Обработчики событий элементов таблицы формы <имя таблицы формы>**. Размещаются процедуры-обработчики таблиц формы и элементов таблиц. Для процедур-обработчиков каждой таблицы должен быть создан свой 
* **Обработчики событий формы**. Содержит процедуры-обработчики событий формы: ПриСозданииНаСервере, ПриОткрытии и т.п.
* **Обработчики команд формы**. Содержит процедуры-обработчики команд формы (имена которых задаются в свойстве Действие команд формы).
* **Завершение немодальных вызовов**. Содержит процедуры-обработчики вызываемые через конструкцию ОписаниеОповещения.
* **Служебные процедуры и функции**. Содержит процедуры и функции, составляющие внутреннюю реализацию общего модуля. 
* **Служебные процедуры и функции <имя раздела>**. Выделенная логика разделов.

```
#Область ПрограммныйИнтерфейс
//Код процедур и функций
#КонецОбласти

#Область УправлениеФормой
//Код процедур и функций
#КонецОбласти

#Область ОбработчикиСобытийЭлементовШапкиФормы
//Код процедур и функций
#КонецОбласти

#Область ОбработчикиСобытийЭлементовТаблицыФормы_ИмяТаблицы
//Код процедур и функций
#КонецОбласти

#Область ОбработчикиСобытийФормы
//Код процедур и функций
#КонецОбласти

#Область ОбработчикиКомандФормы
//Код процедур и функций
#КонецОбласти

#Область ЗавершениеНемодальныхВызовов
//Код процедур и функций
#КонецОбласти

#Область СлужебныеПроцедурыИФункции
//Код процедур и функций
#КонецОбласти

#Область СлужебныеПроцедурыИФункции_Раздел
//Код процедур и функций
#КонецОбласти
```

### Модуль объекта

Описание областей:
* **Программный интерфейс**. Экспортные процедуры и функции, предназначенные для использования другими объектами конфигурации или другими программами (например, через внешнее соединение)
* **Обработчики проведения**. Процедуры и функции, предназначенные для сбора и подготовки данных для проведения документов
* **Обработчики событий**. Процедуры-обработчики событий модуля объекта (ПриЗаписи, ПриПроведении и др.)
* **Служебный программный интерфейс**. Предназначен для модулей, которые являются частью текущего объекта. В нем должны быть размещены экспортные процедуры и функции, которые допустимо вызывать только из других форм и модулей этого же объекта.
* **Служебные процедуры и функции**. Процедуры и функции, составляющие внутреннюю реализацию общего модуля

```
#Область ПрограммныйИнтерфейс
//Код процедур и функций
#КонецОбласти

#Область СлужебныйПрограммныйИнтерфейс 
//Код процедур и функций
#КонецОбласти

#Область ОбработчикиПроведения
//Код процедур и функций
#КонецОбласти

#Область ОбработчикиСобытий
//Код процедур и функций
#КонецОбласти

#Область СлужебныеПроцедурыИФункции
//Код процедур и функций
#КонецОбласти
```

### Модуль менеджера

Описание областей:
* **Программный интерфейс**. Экспортные процедуры и функции, предназначенные для использования другими объектами конфигурации или другими программами (например, через внешнее соединение)
* **Обработчики событий**. Процедуры-обработчики событий модуля объекта или менеджера (ПриЗаписи, ПриПроведении и др.)
* **Обновление информационной базы**. Процедуры и функции выполнения обработки данных при смене релиза
* **Служебный программный интерфейс**. Предназначен для модулей, которые являются частью текущего объекта. В нем должны быть размещены экспортные процедуры и функции, которые допустимо вызывать только из других форм и модулей этого же объекта.
* **Служебные процедуры и функции**. Содержит процедуры и функции, составляющие внутреннюю реализацию общего модуля 

Для добавления обработчиков команд печати, при использовании БСП необходимо добавить область "**Печать**".

```
#Область ПрограммныйИнтерфейс
//Код процедур и функций
#КонецОбласти

#Область СлужебныйПрограммныйИнтерфейс 
//Код процедур и функций
#КонецОбласти

#Область ОбработчикиСобытий
//Код процедур и функций
#КонецОбласти

#Область ОбновлениеИнформационнойБазы
//Код процедур и функций
#КонецОбласти

#Область СлужебныеПроцедурыИФункции
//Код процедур и функций
#КонецОбласти

#Область Печать
//Код процедур и функций
#КонецОбласти
```

### Модуль команды

Описание областей:
* **Обработчики событий**. Содержит процедуру-обработчик команды ОбработкаКоманды
* **Служебные процедуры и функции**. Содержит процедуры и функции, составляющие внутреннюю реализацию общего модуля

```
#Область ОбработчикиСобытий
//Код процедур и функций
#КонецОбласти

#Область СлужебныеПроцедурыИФункции
//Код процедур и функций
#КонецОбласти
```

### Модуль объекта "Бизнес-процесс"

Описание областей:

* **Программный интерфейс**. Экспортные процедуры и функции, предназначенные для использования другими объектами конфигурации или другими программами (например, через внешнее соединение)
* **Обработчики событий карты маршрута**. Процедуры-обработчики событий элементов карты маршрута
* **Обработчики событий**. Процедуры-обработчики событий модуля объекта (ПриЗаписи, ПриПроведении и др.)
* **Служебный программный интерфейс**. предназначен для модулей, которые являются частью некоторой функциональной подсистемы. В нем должны быть размещены экспортные процедуры и функции, которые допустимо вызывать только из других функциональных подсистем этой же библиотеки
* **Служебные процедуры и функции**. Содержит процедуры и функции, составляющие внутреннюю реализацию общего модуля

```
#Область ПрограммныйИнтерфейс
//Код процедур и функций
#КонецОбласти

#Область ОбработчикиСобытийКартыМаршрута
//Код процедур и функций
#КонецОбласти

#Область ОбработчикиСобытий
//Код процедур и функций
#КонецОбласти

#Область СлужебныйПрограммныйИнтерфейс 
//Код процедур и функций
#КонецОбласти

#Область СлужебныеПроцедурыИФункции
//Код процедур и функций
#КонецОбласти
```